# TCP Server-Client

Этот проект демонстрирует простую реализацию TCP-сервера и TCP-клиента с использованием сокетов. Сервер принимает подключения от нескольких клиентов одновременно, а клиенты отправляют сообщения серверу и получают ответы.

## Как запустить сервер и клиент

Следуйте инструкциям ниже, чтобы запустить сервер и подключиться к нему с клиента.

---

### 1. Сборка программ

Перед запуском необходимо скомпилировать сервер и клиент. Для этого выполните следующие шаги:

#### Сборка сервера
1. Откройте терминал или командную строку.
2. Перейдите в папку с исходным кодом сервера.
3. Выполните команду компиляции:
   ```bash
   gcc server.cpp -o server
   ```

#### Сборка клиента
1. Откройте другой терминал или вкладку.
2. Перейдите в папку с исходным кодом клиента.
3. Выполните команду компиляции:
   ```bash
   gcc client.cpp -o client
   ```

---

### 2. Запуск программ

#### Запуск сервера
1. Откройте терминал или командную строку.
2. Убедитесь, что серверный исполняемый файл (`server`) находится в текущей директории.
3. Выполните команду для запуска сервера:
   ```bash
   ./server
   ```
4. Сервер начнёт слушать входящие подключения на порту `27015`.

#### Запуск клиента
1. Откройте другой терминал или командную строку.
2. Убедитесь, что клиентский исполняемый файл (`client`) находится в текущей директории.
3. Выполните команду для подключения к серверу:
   ```bash
   ./client
   ```
4. Клиент подключится к серверу и запросит ввод сообщения.

---

### 3. Обмен данными

1. **На стороне клиента**:
   - Введите сообщение и нажмите Enter. Оно будет отправлено серверу.
   - Если вы введёте `exit` или прожмёте `Ctrl+C`, клиент завершит соединение.
   
2. **На стороне сервера**:
   - Сервер принимает сообщение от клиента, обрабатывает его и отправляет обратно.
   - Все сообщения и статусы подключения отображаются в консоли сервера.
   - Если вы введёте `exit` или нажав `Ctrl+C`, сервер завершит работу.


---

### 4. Особенности

- Сервер поддерживает **многопользовательские подключения**. Каждый клиент обрабатывается в отдельном потоке.
- Клиент может завершить соединение командой `exit` или нажав `Ctrl+C`.
- Сервер завершает соединение с клиентом, если клиент отключается.

---

### 5. Требования

- **Компилятор**: GCC, или другой поддерживающий C.
- **Операционная система**: Linux, macOS.
- **Библиотеки**:
  - `unistd.h` и `arpa/inet.h` для Linux/macOS.

---

## Функции

### Общие функции
- **`socket`**: Создаёт сокет (дескриптор), используемый для коммуникации между процессами или по сети.
- **`bind`**: Привязывает сокет к указанному адресу и порту (только для сервера).
- **`connect`**: Устанавливает соединение с сервером (только для клиента).
- **`listen`**: Устанавливает сокет в режим прослушивания (только для сервера).
- **`accept`**: Принимает входящее подключение от клиента (только для сервера).
- **`recv`**: Получает данные через сокет.
- **`send`**: Отправляет данные через сокет.
- **`close`**: Закрывает сокет.

---

### Функции работы с памятью и строками
- **`memset`**: Инициализирует блок памяти заданным значением. Используется для обнуления структуры адреса.
- **`malloc`**: Выделяет динамическую память.
- **`free`**: Освобождает ранее выделенную динамическую память.
- **`strcpy`**: Копирует строку из одного места в другое (используется для работы с данными).

---

### Сетевые функции
- **`htons`**: Преобразует 16-битное значение из порядка хоста в сетевой порядок байт.
- **`inet_addr`**: Преобразует строковый IP-адрес (например, `"127.0.0.1"`) в числовое представление.

---

### Потоки
- **`pthread_create`**: Создаёт новый поток выполнения.
- **`pthread_detach`**: Отсоединяет поток, позволяя ему автоматически очищаться после завершения.

---

### Системные вызовы
- **`perror`**: Выводит сообщение об ошибке, связанное с последним системным вызовом.

## Структура кода
### Сервер
- Настраивает сокет для прослушивания входящих соединений.
- Обрабатывает каждого клиента в отдельном потоке, используя `pthread_create`.

### Клиент
- Устанавливает соединение с сервером.
- Отправляет сообщения серверу и получает их обратно.

## Требования
- GCC
- Поддержка POSIX (для потоков)

