# MedianCriterion

## Описание
Этот проект реализует **медианный критерий** на языке R. Данный критерий используется для проверки случайности последовательности чисел, основываясь на количестве смен знаков относительно **медианы**.

---

## Требования
Для работы программы требуется установленный язык **R**.

## Установка и запуск
1. **Убедитесь, что у вас установлен R**. Если нет, скачайте и установите R с официального сайта: https://cran.r-project.org/
2. **Скачайте или создайте CSV-файл** с числовыми данными в следующем формате:

   ```csv
   Value
   -1.86
   1.39
   -2.86
   -0.11
   0.64
   0.14
   -1.11
   0.64
   -0.11
   -0.62
   ```
   Важно: значения в столбце **Value** должны быть записаны с точкой (`.`) в качестве десятичного разделителя.

3. **Сохраните CSV-файл** в удобное место, например, `data.csv` в той же папке, где находится ваш R-скрипт.

4. **Запустите R и выполните скрипт**:
   ```R
   source("MedianCriterion.R", encoding = "UTF-8")
   ```
---

## Описание алгоритма

1. **Чтение данных**  
   Загружаем данные из CSV-файла, извлекаем числовой столбец.

2. **Вычисление медианы**  
   Используем стандартную функцию R:
   ```R
   med <- median(x)
   ```

### 3. Определение знаков
Каждое значение сравнивается с медианой:
- Если значение больше медианы, ставим `+`
- Если значение меньше медианы, ставим `-`

### 4. Подсчет числа серий (nruns)
Серии — это последовательности одинаковых знаков (`+` или `-`), разделенные переходом на другой знак.

Алгоритм:
- Перебираем последовательность знаков.
- Фиксируем смену `+` на `-` и наоборот.
- Подсчитываем количество таких изменений.

### 5. Вычисление дополнительных параметров
- `n` — общее количество элементов в ряду.
- `n0` — количество значений выше медианы (`+`).
- `n1` — количество значений ниже медианы (`-`).
- `mean` — математическое ожидание количества серий: ` mean = 1 + ((2 * n0 * n1)/n) `
- `correct` — поправочный коэффициент, учитывающий небольшие отклонения: `correct = -0.5 * (nruns - mean) / abs(nruns - mean)`.
- `sigma` — стандартное отклонение: ` sigma = sqrt((2 * n0 * n1 * (2 * n0 * n1 - n)) / (n^2 * (n - 1))) `.

### 6. **Вычисление Z-статистики**
   - Z-значение рассчитывается по формуле: `z = (nruns - mean + correct) / sigma`.

### 7. Проверка гипотез
Гипотезы:
- **H0**: Распределение остатков имеется.
- **H1**: Распределение остатков не имеется.

---

## Вывод результатов в консоль

При успешном выполнении программа выведет:
```
Медиана ряда: 0.14
Число наблюдений (n): 10
Количество чисел выше медианы (n0): 5
Количество чисел ниже медианы (n1): 5

Число серий (nruns): 4
Теоретическое среднее число серий (mean): 5.0
Стандартное отклонение (sigma): 1.29
Поправка (correct): 0.5
z-значение: -0.6
Критическое значение (zCritical): 1.96
Вывод по гипотезе: H0
```

---

## Заключение
Этот R-скрипт позволяет **автоматизировать медианный критерий** и проверить случайность последовательности. Результаты анализа можно использовать для статистических исследований и обработки данных.

## Возможные ошибки и решения

1. **Ошибка: "повторяющиеся 'row.names' не разрешаются"**
   - Проверьте, что файл CSV использует точку (`.`) в качестве десятичного разделителя.
   - Убедитесь, что при загрузке данных указано `row.names = NULL`.

2. **График не строится**
   - Убедитесь, что вектор `x` содержит числовые данные (`as.numeric(x)`).

3. **R не видит файл**
   - Проверьте текущую рабочую директорию `getwd()`.
   - Используйте `setwd("путь_к_файлу")`, если файл находится в другой папке.